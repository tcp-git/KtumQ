# เอกสารความต้องการ

## บทนำ

ระบบคิวแบบแยกโปรเจค (Queue System) ที่พัฒนาด้วย Delphi 10.3 และ MySQL v.8 ประกอบด้วย 2 โปรเจคหลัก คือ Caller (สำหรับเรียกคิว) และ Terminal (สำหรับแสดงผล) เชื่อมต่อกันผ่าน WebSocket เพื่อการสื่อสารแบบ real-time

## อภิธานศัพท์

- **Queue_System**: ระบบคิวที่ประกอบด้วย Caller และ Terminal
- **Caller_Application**: แอปพลิเคชันสำหรับเรียกคิวและจัดการหมายเลข
- **Terminal_Application**: แอปพลิเคชันสำหรับแสดงผลหมายเลขคิว
- **WebSocket_Connection**: การเชื่อมต่อแบบ real-time ระหว่าง Caller และ Terminal
- **Queue_Number**: หมายเลขคิว (0001-0009)
- **Database_Record**: ข้อมูลในฐานข้อมูล MySQL ที่เชื่อมโยงกับหมายเลขคิว
- **UniConnection**: คอมโพเนนต์สำหรับเชื่อมต่อฐานข้อมูล MySQL
- **TsgcWebSocketClient**: คอมโพเนนต์ WebSocket สำหรับการสื่อสาร

## ความต้องการ

### ความต้องการที่ 1

**User Story:** ในฐานะผู้ใช้งาน Caller Application ฉันต้องการเห็นสถานะของหมายเลขคิวทั้งหมด เพื่อที่จะทราบว่าหมายเลขใดมีข้อมูลในฐานข้อมูล

#### เกณฑ์การยอมรับ

1. เมื่อ Caller_Application เริ่มทำงาน ระบบ Queue_System จะต้องแสดงตารางขนาด 3x3 ที่แสดงหมายเลขคิว 0001-0009
2. เมื่อ Queue_System สอบถามฐานข้อมูลสำหรับหมายเลขคิว ระบบ Queue_System จะต้องแสดงสีเขียวหากมีข้อมูลในฐานข้อมูล
3. เมื่อ Queue_System สอบถามฐานข้อมูลสำหรับหมายเลขคิว ระบบ Queue_System จะต้องแสดงสีแดงหากไม่มีข้อมูลในฐานข้อมูล
4. เมื่อการเชื่อมต่อฐานข้อมูลสำเร็จ ระบบ Queue_System จะต้องรีเฟรชสีสถานะคิวโดยอัตโนมัติ
5. เมื่อ Caller_Application โหลด ระบบ Queue_System จะต้องอ่านการตั้งค่าการเชื่อมต่อจากไฟล์ INI โดยใช้ UniConnection

### ความต้องการที่ 2

**User Story:** ในฐานะผู้ใช้งาน Caller Application ฉันต้องการนำทางผ่านหมายเลขคิวต่างๆ เพื่อที่จะสามารถเลือกหมายเลขที่ต้องการได้อย่างสะดวก

#### เกณฑ์การยอมรับ

1. เมื่อผู้ใช้คลิกปุ่ม first ระบบ Caller_Application จะต้องนำทางไปยังหมายเลขคิว 0001
2. เมื่อผู้ใช้คลิกปุ่ม next ระบบ Caller_Application จะต้องนำทางไปยังหมายเลขคิวถัดไปตามลำดับ
3. เมื่อผู้ใช้คลิกปุ่ม previous ระบบ Caller_Application จะต้องนำทางไปยังหมายเลขคิวก่อนหน้าตามลำดับ
4. เมื่อผู้ใช้คลิกปุ่ม last ระบบ Caller_Application จะต้องนำทางไปยังหมายเลขคิว 0009
5. เมื่อการนำทางถึงขีดจำกัด ระบบ Caller_Application จะต้องจัดการการวนกลับอย่างเหมาะสม

### ความต้องการที่ 3

**User Story:** ในฐานะผู้ใช้งาน Caller Application ฉันต้องการเลือกหมายเลขคิวเพื่อส่งไปยัง Terminal เพื่อที่จะสามารถเรียกหมายเลขที่ต้องการได้

#### เกณฑ์การยอมรับ

1. เมื่อผู้ใช้คลิกหมายเลขคิว ระบบ Caller_Application จะต้องเปลี่ยนสีของหมายเลขที่เลือกเป็นสีม่วง
2. เมื่อผู้ใช้คลิกหมายเลขสีม่วงที่เลือกไว้แล้ว ระบบ Caller_Application จะต้องยกเลิกการเลือกและคืนสีเดิม
3. เมื่อผู้ใช้เลือกหมายเลขคิวหลายตัว ระบบ Caller_Application จะต้องอนุญาตให้เลือกแบบไม่ต่อเนื่อง เช่น 001,003,005,007
4. เมื่อผู้ใช้ส่งหมายเลขที่เลือก ระบบ Caller_Application จะต้องส่งข้อมูลในรูปแบบ JSON ผ่าน WebSocket_Connection
5. เมื่อหมายเลขถูกส่ง ระบบ Caller_Application จะต้องจดจำสถานะการส่งของแต่ละหมายเลข

### ความต้องการที่ 4

**User Story:** ในฐานะผู้ใช้งาน Terminal Application ฉันต้องการเห็นหมายเลขคิวที่ถูกเรียก เพื่อที่จะสามารถแสดงผลให้ลูกค้าเห็นได้

#### เกณฑ์การยอมรับ

1. เมื่อ Terminal_Application เริ่มทำงาน ระบบ Queue_System จะต้องแสดงหัวข้อที่ด้านบนและตารางขนาด 3x3 ของตัวเลขขนาดใหญ่
2. เมื่อ Terminal_Application รับข้อมูล JSON ผ่าน TsgcWebSocketClient ระบบ Queue_System จะต้องอัปเดตการแสดงผลตามข้อมูลที่ได้รับ
3. เมื่อได้รับหมายเลขคิวใหม่ ระบบ Terminal_Application จะต้องทำให้หมายเลขใหม่กระพริบ
4. เมื่อแสดงหมายเลขที่ส่งมาก่อนหน้า ระบบ Terminal_Application จะต้องแสดงในสถานะคงที่โดยไม่กระพริบ
5. เมื่อ Terminal_Application มีพื้นที่ข้อความเลื่อน ระบบ Queue_System จะต้องจัดเตรียมพื้นที่สำหรับข้อความวิ่ง

### ความต้องการที่ 5

**User Story:** ในฐานะผู้ดูแลระบบ ฉันต้องการให้ระบบมีการเชื่อมต่ออัตโนมัติและการตั้งค่าที่ยืดหยุ่น เพื่อที่จะสามารถจัดการระบบได้อย่างมีประสิทธิภาพ

#### เกณฑ์การยอมรับ

1. เมื่อแอปพลิเคชันใดๆ เริ่มทำงาน ระบบ Queue_System จะต้องใช้ฟังก์ชัน auto-connect สำหรับ WebSocket_Connection
2. เมื่อต้องการแก้ไขการตั้งค่าการเชื่อมต่อ ระบบ Queue_System จะต้องจัดเตรียมฟอร์มการตั้งค่าการเชื่อมต่อ
3. เมื่อส่งหมายเลขคิว ระบบ Caller_Application จะต้องรองรับการส่งทั้งหมายเลขเดียวและหลายหมายเลข
4. เมื่อประมวลผลหมายเลขที่ได้รับ ระบบ Terminal_Application จะต้องแยกแยะระหว่างหมายเลขใหม่และเก่าสำหรับการแสดงผล
5. เมื่อนักพัฒนาตรวจสอบโค้ด ระบบ Queue_System จะต้องรักษาสถาปัตยกรรมที่อ่านง่าย แก้ไขง่าย ที่นักพัฒนาหลายคนสามารถเข้าใจได้ทันที

### ความต้องการที่ 6

**User Story:** ในฐานะนักพัฒนา ฉันต้องการให้ระบบมีโครงสร้างฐานข้อมูลที่เหมาะสม เพื่อที่จะสามารถจัดเก็บและจัดการข้อมูลคิวได้อย่างมีประสิทธิภาพ

#### เกณฑ์การยอมรับ

1. เมื่อออกแบบฐานข้อมูล ระบบ Queue_System จะต้องสร้างโครงสร้างตารางที่เหมาะสมสำหรับการจัดการคิว
2. เมื่อ Caller_Application เชื่อมต่อฐานข้อมูล ระบบ Queue_System จะต้องใช้ UniConnection ที่เข้ากันได้กับ MySQL v.8
3. เมื่อ Terminal_Application ทำงาน ระบบ Queue_System จะต้องทำงานได้โดยไม่ต้องเชื่อมต่อฐานข้อมูลโดยตรง
4. เมื่อต้องการความคงทนของข้อมูล ระบบ Queue_System จะต้องจัดเก็บสถานะคิวและประวัติการส่ง
5. เมื่อสถาปัตยกรรมระบบถูกใช้งาน ระบบ Queue_System จะต้องแยกความรับผิดชอบระหว่างการเข้าถึงข้อมูล ตรรกะทางธุรกิจ และชั้นการนำเสนอ